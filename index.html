<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UBC Solar Simulation: Simulation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">UBC Solar Simulation
   </div>
   <div id="projectbrief">UBC Solar&#39;s simulation environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Simulation</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md23"></a> This document describes the high-level architecture of two aspects of UBC Solar's race strategy: simulation and our race strategy algorithm. To learn about our client application see <a href="https://github.com/UBC-Solar/Simulation-Client">client repository</a>.</p>
<p><img src="images/Simulation.drawio.png" alt="Simulation" class="inline"/></p>
<p>Our simulation of UBC Solar's solar-powered race cars is a collection of models each representing one component of our car. They are built from a mix of physics first-principles, modelling and datasheets, and work together to track every Joule of energy. Simulation can be thought of as a function that takes in driving speeds as an input, and then simulates the car as it traverses a given competition at those inputted speeds. Our race strategy algorithm, currently a genetic-algorithm based optimization strategy, uses Simulation to evaluate the performance of different driving speeds, given the competition constraints, and will output the ideal (or close to) driving speeds for the competition. Our client ties everything together, giving a user a visual interface to interact with Simulation and the optimization process, as well as displaying the results of Simulation and comparing it to real-time telemetry data from the competition (WIP).</p>
<p><img src="images/Architecture.drawio.png" alt="Architecture" class="inline"/></p>
<p>Simulation is structured in an object-oriented manner, where each component of the car is represented by a module. We distinguish between <code>Consumer</code>s that consume energy, and <code>Producer</code>s which produce energy: together they comprehensively simulate and track the energy state of the car. <code>Storage</code> models are used to model the storing and drawing of power. Additionally, collectors acquire and process environment data to create a full picture of the physical situation that our vehicle will be existing in, and the road conditions it will be traversing.</p>
<p><img src="images/Algorithm.drawio.png" alt="Algorithm" class="inline"/></p>
<p>We simulate our vehicle by dividing the competition period into discrete time steps, giving us a finite and discrete number of moments (tick) to simulate. Simulation begins by taking the input of driving speeds and making the critical assumption that driving at those speeds for the duration of the competition is physically achievable. Therefore, we can obtain the theoretical position of the car at every tick. Thus, we then map each tick to a weather forecast and a path coordinate (we have vastly fewer of each than we do ticks, so we map each tick to the closest). From that, we can ascertain the road gradient, cloud cover, wind speed and direction, vehicle bearings, and elevation of the car at every tick. Then, we can calculate the power that the motor will require to achieve the required speed at every tick, and the solar irradiance experienced and the energy that our solar arrays will capture at every tick. Thus, we can determine the amount of energy that will be drawn or stored in the battery at every tick, which allows us to determine the state of charge of the battery for every tick. Finally, we check if our assumption was right, that we would have enough energy to achieve the speeds that we set out to achieve, and if we were correct then simulation is completed, and was successful.</p>
<p>To learn about Simulation at a module-level, see the following documents:</p>
<h1><a class="anchor" id="autotoc_md24"></a>
Table of Contents</h1>
<ul>
<li><a class="el" href="md_simulation_2arrays_2module-info.html">Arrays</a></li>
<li><a class="el" href="md_simulation_2battery_2module-info.html">Battery</a></li>
<li><a class="el" href="md_simulation_2cache_2module-info.html">Cache</a></li>
<li><a class="el" href="md_simulation_2common_2module-info.html">Common</a></li>
<li><a class="el" href="md_simulation_2config_2module-info.html">Config</a></li>
<li><a class="el" href="md_simulation_2data_2module-info.html">Data</a></li>
<li><a class="el" href="md_simulation_2environment_2module-info.html">Environment</a></li>
<li><a class="el" href="md_simulation_2library_2module-info.html">Library</a></li>
<li><a class="el" href="md_simulation_2lvs_2module-info.html">LVS</a></li>
<li><a class="el" href="md_simulation_2main_2module-info.html">Main</a></li>
<li><a class="el" href="md_simulation_2motor_2module-info.html">Motor</a></li>
<li><a class="el" href="md_simulation_2optimization_2module-info.html">Optimization</a></li>
<li><a class="el" href="md_simulation_2regen_2module-info.html">Regen</a></li>
<li><a class="el" href="md_simulation_2utils_2module-info.html">Utils</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
