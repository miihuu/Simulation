<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UBC Solar Simulation: Simulation.simulation.environment.WeatherForecasts.WeatherForecasts Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">UBC Solar Simulation
   </div>
   <div id="projectbrief">UBC Solar&#39;s simulation environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Simulation</b></li><li class="navelem"><b>simulation</b></li><li class="navelem"><b>environment</b></li><li class="navelem"><a class="el" href="namespace_simulation_1_1simulation_1_1environment_1_1_weather_forecasts.html">WeatherForecasts</a></li><li class="navelem"><a class="el" href="class_simulation_1_1simulation_1_1environment_1_1_weather_forecasts_1_1_weather_forecasts.html">WeatherForecasts</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_simulation_1_1simulation_1_1environment_1_1_weather_forecasts_1_1_weather_forecasts-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Simulation.simulation.environment.WeatherForecasts.WeatherForecasts Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4e7f045946c726251cd058b163412b9a" id="r_a4e7f045946c726251cd058b163412b9a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e7f045946c726251cd058b163412b9a">__init__</a> (self, api_key, coords, duration, race_type, golang=False, library=None, weather_data_frequency=&quot;daily&quot;, force_update=False, origin_coord=None, hash_key=None)</td></tr>
<tr class="separator:a4e7f045946c726251cd058b163412b9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61d6b787a855dc4fbc61c865362f5354" id="r_a61d6b787a855dc4fbc61c865362f5354"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a61d6b787a855dc4fbc61c865362f5354">get_coord_weather_forecast</a> (self, coord, weather_data_frequency, duration)</td></tr>
<tr class="separator:a61d6b787a855dc4fbc61c865362f5354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129ad75d6e62ec0929b8c3b6fd22b836" id="r_a129ad75d6e62ec0929b8c3b6fd22b836"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a129ad75d6e62ec0929b8c3b6fd22b836">update_path_weather_forecast</a> (self, coords, weather_data_frequency, duration)</td></tr>
<tr class="separator:a129ad75d6e62ec0929b8c3b6fd22b836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4b8628d1a7a6bb3c4596df450915de2" id="r_ae4b8628d1a7a6bb3c4596df450915de2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae4b8628d1a7a6bb3c4596df450915de2">calculate_closest_weather_indices</a> (self, cumulative_distances)</td></tr>
<tr class="separator:ae4b8628d1a7a6bb3c4596df450915de2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde44e6848ea777fe8eae068b3b60d0b" id="r_acde44e6848ea777fe8eae068b3b60d0b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acde44e6848ea777fe8eae068b3b60d0b">python_calculate_closest_weather_indices</a> (self, cumulative_distances, average_distances)</td></tr>
<tr class="separator:acde44e6848ea777fe8eae068b3b60d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9995acf672dcfa0913e677dc41ad45a9" id="r_a9995acf672dcfa0913e677dc41ad45a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9995acf672dcfa0913e677dc41ad45a9">get_weather_forecast_in_time</a> (self, indices, unix_timestamps)</td></tr>
<tr class="separator:a9995acf672dcfa0913e677dc41ad45a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a243074cf1b4d2ef31518a0ea7fcd5e47" id="r_a243074cf1b4d2ef31518a0ea7fcd5e47"><td class="memItemLeft" align="right" valign="top"><a id="a243074cf1b4d2ef31518a0ea7fcd5e47" name="a243074cf1b4d2ef31518a0ea7fcd5e47"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>golang_get_weather_in_time</b> (self, unix_timestamps, indices)</td></tr>
<tr class="separator:a243074cf1b4d2ef31518a0ea7fcd5e47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14962679a0032da73d545d7074b4bf2c" id="r_a14962679a0032da73d545d7074b4bf2c"><td class="memItemLeft" align="right" valign="top"><a id="a14962679a0032da73d545d7074b4bf2c" name="a14962679a0032da73d545d7074b4bf2c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>python_get_weather_in_time</b> (self, unix_timestamps, indices)</td></tr>
<tr class="separator:a14962679a0032da73d545d7074b4bf2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a09c4835eb77980a040a60d36e3754b11" id="r_a09c4835eb77980a040a60d36e3754b11"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09c4835eb77980a040a60d36e3754b11">python_calculate_closest_timestamp_indices</a> (unix_timestamps, dt_local_array)</td></tr>
<tr class="separator:a09c4835eb77980a040a60d36e3754b11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa2d117b2a17374ce6cbf29a6716a32d" id="r_aaa2d117b2a17374ce6cbf29a6716a32d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa2d117b2a17374ce6cbf29a6716a32d">cull_dataset</a> (coords, reduction_factor)</td></tr>
<tr class="separator:aaa2d117b2a17374ce6cbf29a6716a32d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0db6042b29c2f305ce74b6f46ba0f4" id="r_a6c0db6042b29c2f305ce74b6f46ba0f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c0db6042b29c2f305ce74b6f46ba0f4">get_array_directional_wind_speed</a> (vehicle_bearings, wind_speeds, wind_directions)</td></tr>
<tr class="separator:a6c0db6042b29c2f305ce74b6f46ba0f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2cdc48826eaa963755f5411ac81f6be" id="r_ac2cdc48826eaa963755f5411ac81f6be"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac2cdc48826eaa963755f5411ac81f6be">get_weather_advisory</a> (weather_id)</td></tr>
<tr class="separator:ac2cdc48826eaa963755f5411ac81f6be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a4cf1b36ce2b6d70e68de004b001a0346" id="r_a4cf1b36ce2b6d70e68de004b001a0346"><td class="memItemLeft" align="right" valign="top"><a id="a4cf1b36ce2b6d70e68de004b001a0346" name="a4cf1b36ce2b6d70e68de004b001a0346"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>race_type</b></td></tr>
<tr class="separator:a4cf1b36ce2b6d70e68de004b001a0346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1be4a587afa5567c74c53510fd351802" id="r_a1be4a587afa5567c74c53510fd351802"><td class="memItemLeft" align="right" valign="top"><a id="a1be4a587afa5567c74c53510fd351802" name="a1be4a587afa5567c74c53510fd351802"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>api_key</b></td></tr>
<tr class="separator:a1be4a587afa5567c74c53510fd351802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d6e782a8c2342d08396ebf25c4e88a0" id="r_a4d6e782a8c2342d08396ebf25c4e88a0"><td class="memItemLeft" align="right" valign="top"><a id="a4d6e782a8c2342d08396ebf25c4e88a0" name="a4d6e782a8c2342d08396ebf25c4e88a0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>last_updated_time</b></td></tr>
<tr class="separator:a4d6e782a8c2342d08396ebf25c4e88a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a561f320deb24c0437b687b3cf466c244" id="r_a561f320deb24c0437b687b3cf466c244"><td class="memItemLeft" align="right" valign="top"><a id="a561f320deb24c0437b687b3cf466c244" name="a561f320deb24c0437b687b3cf466c244"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>golang</b></td></tr>
<tr class="separator:a561f320deb24c0437b687b3cf466c244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a504f8db8f2778bc02b1c76b69bd55e3b" id="r_a504f8db8f2778bc02b1c76b69bd55e3b"><td class="memItemLeft" align="right" valign="top"><a id="a504f8db8f2778bc02b1c76b69bd55e3b" name="a504f8db8f2778bc02b1c76b69bd55e3b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>lib</b></td></tr>
<tr class="separator:a504f8db8f2778bc02b1c76b69bd55e3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d7b6b391b3e56c72256970dee186485" id="r_a2d7b6b391b3e56c72256970dee186485"><td class="memItemLeft" align="right" valign="top"><a id="a2d7b6b391b3e56c72256970dee186485" name="a2d7b6b391b3e56c72256970dee186485"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>origin_coord</b></td></tr>
<tr class="separator:a2d7b6b391b3e56c72256970dee186485"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c40b447a2259f3e690798213479c5c" id="r_ad9c40b447a2259f3e690798213479c5c"><td class="memItemLeft" align="right" valign="top"><a id="ad9c40b447a2259f3e690798213479c5c" name="ad9c40b447a2259f3e690798213479c5c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>dest_coord</b></td></tr>
<tr class="separator:ad9c40b447a2259f3e690798213479c5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a835e3272cc8325c6754ccd547f780118" id="r_a835e3272cc8325c6754ccd547f780118"><td class="memItemLeft" align="right" valign="top"><a id="a835e3272cc8325c6754ccd547f780118" name="a835e3272cc8325c6754ccd547f780118"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>coords</b></td></tr>
<tr class="separator:a835e3272cc8325c6754ccd547f780118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70aea5b71c9a7d528bac8dc14a4558e2" id="r_a70aea5b71c9a7d528bac8dc14a4558e2"><td class="memItemLeft" align="right" valign="top"><a id="a70aea5b71c9a7d528bac8dc14a4558e2" name="a70aea5b71c9a7d528bac8dc14a4558e2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>weather_forecast</b></td></tr>
<tr class="separator:a70aea5b71c9a7d528bac8dc14a4558e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Class that gathers weather data and performs calculations on it to allow the implementation of weather phenomenon
such as changes in wind speeds and cloud cover in the simulation.

Attributes:
    api_key (string): key that allows us to gather data from OpenWeatherAPI
    coords (NumPy array [N][lat, long]): a list of N coordinates for which to gather weather forecasts for
    origin_coord (NumPy array [lat, long]): the starting coordinate
    dest_coord (NumPy array [lat, long]): the ending coordinate
    last_updated_time (int): value that tells us the starting time after which we have weather data available

    weather_forecast (NumPy array [N][T][9]): array that stores the complete weather forecast data. N represents the
        number of coordinates, T represents time length which differs depending on the `weather_data_frequency`
        argument ("current" -&gt; T = 1 ; "hourly" -&gt; T = 24 ; "daily" -&gt; T = 8). The last 9 represents the number of
        weather forecast fields available. These are: (latitude, longitude, dt (UNIX time), timezone_offset
        (in seconds), dt + timezone_offset (local time), wind_speed, wind_direction, cloud_cover, description_id)
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4e7f045946c726251cd058b163412b9a" name="a4e7f045946c726251cd058b163412b9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e7f045946c726251cd058b163412b9a">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Simulation.simulation.environment.WeatherForecasts.WeatherForecasts.__init__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>api_key</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>coords</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>duration</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>race_type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>golang</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>library</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>weather_data_frequency</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;daily&quot;</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>force_update</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>origin_coord</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>hash_key</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Initializes the instance of a WeatherForecast class

:param api_key: A personal OpenWeatherAPI key to access weather forecasts
:param origin_coord: A NumPy array of a single [latitude, longitude]
:param coords: A NumPy array of [latitude, longitude]
:param weather_data_frequency: Influences what resolution weather data is requested, must be one of
    "current", "hourly", or "daily"
:param duration: amount of time simulated (in hours)
:param force_update: if true, weather cache data is updated by calling the OpenWeatherAPI
:param golang: boolean determining whether to use faster GoLang implementations when available
:param hash_key: key used to identify cached data as valid for a Simulation model</pre> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae4b8628d1a7a6bb3c4596df450915de2" name="ae4b8628d1a7a6bb3c4596df450915de2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4b8628d1a7a6bb3c4596df450915de2">&#9670;&#160;</a></span>calculate_closest_weather_indices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Simulation.simulation.environment.WeatherForecasts.WeatherForecasts.calculate_closest_weather_indices </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cumulative_distances</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">:param np.ndarray cumulative_distances: NumPy Array representing cumulative distances theoretically achievable for a given input speed array
:returns: array of the closest weather indices.
:rtype: np.ndarray</pre><pre class="fragment">IMPORTANT: we only have weather coordinates for a discrete set of coordinates. However, the car could be at any
coordinate in between these available weather coordinates. We need to figure out what coordinate the car is at
at each timestep and then we can figure out the full weather forecast at each timestep.

For example, imagine the car is at some coordinate (10, 20). Further imagine that we have a week's worth of
weather forecasts for the following five coordinates: (5, 4), (11, 19), (20, 30), (40, 30), (0, 60). Which
set of weather forecasts should we choose? Well, we should choose the (11, 19) one since our coordinate
(10, 20) is closest to (11, 19). This is what the following code is accomplishing. However, it is not dealing
with the coordinates directly but rather is dealing with the distances between the coordinates. 

Furthermore, once we have chosen a week's worth of weather forecasts for a specific coordinate, we must isolate
a single weather forecast depending on what time the car is at the coordinate (10, 20). That is the job of the
`get_weather_forecast_in_time()` method.</pre> 
</div>
</div>
<a id="aaa2d117b2a17374ce6cbf29a6716a32d" name="aaa2d117b2a17374ce6cbf29a6716a32d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa2d117b2a17374ce6cbf29a6716a32d">&#9670;&#160;</a></span>cull_dataset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Simulation.simulation.environment.WeatherForecasts.WeatherForecasts.cull_dataset </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>coords</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>reduction_factor</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">As we currently have a limited number of API calls(60) every minute with the
current Weather API, we must shrink the dataset significantly. As the
OpenWeatherAPI models have a resolution of between 2.5 - 70 km, we will
go for a resolution of 25km. Assuming we travel at 100km/h for 12 hours,
1200 kilometres/25 = 48 API calls

As the Google Maps API has a resolution of around 40m between points,
for ASC, we must cull at 625:1 (because 25,000m / 40m = 625)

:param np.ndarray coords: array to be reduced
:param int reduction_factor: the factor in which the array will be reduced
:return: reduced array
:rtype: np.ndarray</pre> 
</div>
</div>
<a id="a6c0db6042b29c2f305ce74b6f46ba0f4" name="a6c0db6042b29c2f305ce74b6f46ba0f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c0db6042b29c2f305ce74b6f46ba0f4">&#9670;&#160;</a></span>get_array_directional_wind_speed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Simulation.simulation.environment.WeatherForecasts.WeatherForecasts.get_array_directional_wind_speed </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>vehicle_bearings</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>wind_speeds</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>wind_directions</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Returns the array of wind speed in m/s, in the direction opposite to the 
    bearing of the vehicle


:param np.ndarray vehicle_bearings: (float[N]) The azimuth angles that the vehicle in, in degrees
:param np.ndarray wind_speeds: (float[N]) The absolute speeds in m/s
:param np.ndarray wind_directions: (float[N]) The wind direction in the meteorlogical convention. To convert from meteorlogical convention to azimuth angle, use (x + 180) % 360
:returns: The wind speeds in the direction opposite to the bearing of the vehicle
:rtype: np.ndarray</pre> 
</div>
</div>
<a id="a61d6b787a855dc4fbc61c865362f5354" name="a61d6b787a855dc4fbc61c865362f5354"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61d6b787a855dc4fbc61c865362f5354">&#9670;&#160;</a></span>get_coord_weather_forecast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Simulation.simulation.environment.WeatherForecasts.WeatherForecasts.get_coord_weather_forecast </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>coord</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>weather_data_frequency</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>duration</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Passes in a single coordinate, returns a weather forecast
for the coordinate depending on the entered "weather_data_frequency"
argument. This function is unlikely to ever be called directly.

:param np.ndarray coord: A single coordinate stored inside a NumPy array [latitude, longitude]
:param str weather_data_frequency: Influences what resolution weather data is requested, must be one of
    "current", "hourly", or "daily"
:param int  duration: amount of time simulated (in hours)

:returns weather_array: [N][9]
- [N]: is 1 for "current", 24 for "hourly", 8 for "daily"
- [9]: (latitude, longitude, dt (UNIX time), timezone_offset (in seconds), dt + timezone_offset (local time),
       wind_speed, wind_direction, cloud_cover, description_id)
:rtype: np.ndarray
For reference to the API used:
- https://openweathermap.org/api/one-call-api</pre> 
</div>
</div>
<a id="ac2cdc48826eaa963755f5411ac81f6be" name="ac2cdc48826eaa963755f5411ac81f6be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2cdc48826eaa963755f5411ac81f6be">&#9670;&#160;</a></span>get_weather_advisory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Simulation.simulation.environment.WeatherForecasts.WeatherForecasts.get_weather_advisory </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>weather_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Returns a string indicating the type of weather to expect, from the standardized
    weather code passed as a parameter

https://openweathermap.org/weather-conditions#Weather-Condition-Codes-2
:param int weather_id: Weather ID
:return: type of weather advisory
:rtype: str</pre> 
</div>
</div>
<a id="a9995acf672dcfa0913e677dc41ad45a9" name="a9995acf672dcfa0913e677dc41ad45a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9995acf672dcfa0913e677dc41ad45a9">&#9670;&#160;</a></span>get_weather_forecast_in_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Simulation.simulation.environment.WeatherForecasts.WeatherForecasts.get_weather_forecast_in_time </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>indices</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>unix_timestamps</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Takes in an array of indices of the weather_forecast array, and an array of timestamps. Uses those to figure out
what the weather forecast is at each time step being simulated.

we only have weather at discrete timestamps. The car however can be in any timestamp in
between. Therefore, we must be able to choose the weather timestamp that is closest to the one that the car is in
so that we can more accurately determine the weather experienced by the car at that timestamp.

For example, imagine the car is at some coordinate (x,y) at timestamp 100. Imagine we know the weather forecast
at (x,y) for five different timestamps: 0, 30, 60, 90, and 120. Which weather forecast should we
choose? Clearly, we should choose the weather forecast at 90 since it is the closest to 100. That's what the
below code is accomplishing.

:param np.ndarray indices: (int[N]) coordinate indices of self.weather_forecast
:param np.ndarray unix_timestamps: (int[N]) unix timestamps of the vehicle's journey
:returns:
    - A NumPy array of size [N][9]
    - [9] (latitude, longitude, unix_time, timezone_offset, unix_time_corrected, wind_speed, wind_direction,
                cloud_cover, precipitation, description):
:rtype: np.ndarray</pre> 
</div>
</div>
<a id="a09c4835eb77980a040a60d36e3754b11" name="a09c4835eb77980a040a60d36e3754b11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09c4835eb77980a040a60d36e3754b11">&#9670;&#160;</a></span>python_calculate_closest_timestamp_indices()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Simulation.simulation.environment.WeatherForecasts.WeatherForecasts.python_calculate_closest_timestamp_indices </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>unix_timestamps</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>dt_local_array</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Python implementation to find the indices of the closest timestamps in dt_local_array and package them into a NumPy Array

:param np.ndarray unix_timestamps: NumPy Array (float[N]) of unix timestamps of the vehicle's journey
:param np.ndarray dt_local_array: NumPy Array (float[N]) of local times, represented as unix timestamps
:returns: NumPy Array of (int[N]) containing closest timestamp indices used by get_weather_forecast_in_time
:rtype: np.ndarray</pre> 
</div>
</div>
<a id="acde44e6848ea777fe8eae068b3b60d0b" name="acde44e6848ea777fe8eae068b3b60d0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acde44e6848ea777fe8eae068b3b60d0b">&#9670;&#160;</a></span>python_calculate_closest_weather_indices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Simulation.simulation.environment.WeatherForecasts.WeatherForecasts.python_calculate_closest_weather_indices </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cumulative_distances</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>average_distances</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Python implementation of calculate_closest_weather_indices. See parent function for documentation details.</pre> 
</div>
</div>
<a id="a129ad75d6e62ec0929b8c3b6fd22b836" name="a129ad75d6e62ec0929b8c3b6fd22b836"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a129ad75d6e62ec0929b8c3b6fd22b836">&#9670;&#160;</a></span>update_path_weather_forecast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Simulation.simulation.environment.WeatherForecasts.WeatherForecasts.update_path_weather_forecast </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>coords</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>weather_data_frequency</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>duration</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Passes in a list of coordinates, returns the hourly weather forecast
for each of the coordinates

:param np.ndarray coords: A NumPy array of [coord_index][2]
- [2] =&gt; [latitude, longitude]
:param str weather_data_frequency: Influences what resolution weather data is requested, must be one of
    "current", "hourly", or "daily"
:param int duration: duration of weather requested, in hours

:returns
- A NumPy array [coord_index][N][9]
- [coord_index]: the index of the coordinates passed into the function
- [N]: is 1 for "current", 24 for "hourly", 8 for "daily"
- [9]: (latitude, longitude, dt (UNIX time), timezone_offset (in seconds), dt + timezone_offset (local time),
       wind_speed, wind_direction, cloud_cover, description_id)</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>simulation/environment/<b>WeatherForecasts.py</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
